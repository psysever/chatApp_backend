// import express from 'express'
// import bodyParser from 'body-parser'
// import { URLSearchParams } from 'url'

// const app = express()
// app.use(bodyParser.json())
// app.use(bodyParser.urlencoded({ extended: true }))

// const MongoClient = require('mongodb').MongoClient
// var db: any
// const cors = require('cors')
// app.use(cors())

// MongoClient.connect(
//   'mongodb+srv://psysever:1234@cluster0.gcrfw.mongodb.net/chatApp?retryWrites=true&w=majority',
//   (err: any, client: any) => {
//     if (err) return console.log(err)
//     db = client.db('chatApp')
//     db.collection('counter').findOne(
//       { name: 'ê²Œì‹œë¬¼ê°¯ìˆ˜' },
//       (err: any, result: any) => {
//         console.log(result.totalPost)
//         const totalCount = result.totalPost
//         db.collection('counter').updateOne(
//           { name: 'ê²Œì‹œë¬¼ê°¯ìˆ˜' },
//           { $inc: { totalPost: 1 } },
//           (err: any, result: any) => {},
//         )
//         app.post('/add', (req: any, res: any) => {
//           db.collection('post').insertOne(
//             {
//               title: req.body.title,
//               contents: req.body.contents,
//               _id: totalCount + 1,
//             },
//             (err: any, result: any) => {
//               console.log(req.body)
//               res.send({ message: 'ok' })
//             },
//           )
//         })
//         //updateëŠ” operator í˜•ì‹ìœ¼ë¡œ ì¨ì•¼í•¨ $set(ë³€ê²½) $inc(ì¦ê°€) $min(ê¸°ì¡´ê°’ë³´ë‹¤ ì ì„ ë•Œë§Œ ë³€ê²½) $rename (key ê°’ ì´ë¦„ë³€ê²½)
//         //updateOne({},{},()=>{}) í•˜ë‚˜ë¥¼ ìˆ˜ì •í•  ìˆ˜ ìˆë‹¤.updateMany() í•œë²ˆì— ë§ì€ê±¸ ìˆ˜ì •í•˜ê³  ì‹¶ë‹¤
//       },
//     ) //  .find()ëª¨ë“  ë°ì´í„°ë¥¼ ì°¾ëŠ”ë‹¤. .findOne ì›í•˜ëŠ”ë°ì´í„° í•˜ë‚˜ë§Œ ì°¾ëŠ”ë‹¤
//     //--create

//     //---get
//     app.get('/list', (req, res) => {
//       db.collection('post')
//         .find()
//         .toArray(function (error: any, result: any) {
//           //.find.toArray DBì—ìˆëŠ” ìë£Œë“¤ì„ ë‹¤ ë³´ì—¬ì¤€ë‹¤.

//           res.send(result)
//         })
//     })
//     //--delete
//     // app.delete('/delete', (req: any , res: any) => {
//     //   req.body._id = parseInt(req.body._id) //parseInt string => int
//     //   db.collection('post').deleteOne(req.body._id, (err: any, result: any) => {
//     //     console.log('ì‚­ì œì™„ë£Œ')
//     //     res.status(200).send({message:
//     //     "success"}); //200 ì´ë©´ ì¼ë°˜ì ìœ¼ë¡œ ì„±ê³µ 400ì´ë©´ ê³ ê°ì˜ëª»ìœ¼ë¡œ ìš”ì²­ì‹¤íŒ¨ 500ì—ëŸ¬ ì„œë²„ë¬¸ì œë¡œ ìš”ì²­ì‹¤íŒ¨
//     //   }) //ì›í•˜ëŠ” ê²Œì‹œë¬¼ ì‚­ì œ
//     // })
//     //--edit
//     // app.get('/edit/:id', (req: any, res: any) => {
//     //   db.collection('post').findOne(
//     //     { _id: parseInt(req.params.id) },
//     //     (err: any, result: any) => {
//     //       res.render('edit.ejs', { post: result })
//     //     },
//     //   )
//     //   app.put('/edit', (req: any, res: any) => {
//     //     db.collection('post').updateOne(
//     //       { _id: parseInt(res.body.id) },
//     //       { $set: { title: res.body.title, date: res.body.date } },
//     //       (err: any, result: any) => {},
//     //     )
//     //   }) //updatateOne(ì–´ë–¤ê²Œì‹œë¬¼ìˆ˜ì •í• ê±´ì§€, ìˆ˜ì •ê°’, ì½œë°±í•¨ìˆ˜) $set(ë³€ê²½) ì—…ë°ì´íŠ¸í•´ì£¼ì„¸ìš” ì—†ìœ¼ë©´ ì¶”ê°€í•´ì£¼ì„¸ìš”.
//     //   console.log('ìˆ˜ì •ì™„ë£Œ')
//     //   res.redirect('/list') //ì‘ë‹µì€ ê¼­í•„ìš”í•˜ë‹¤.
//     // })

//     app.listen(8080, function () {
//       console.log(`ğŸš€ Server: http://localhost:8080`)
//     })
//   },
// )
